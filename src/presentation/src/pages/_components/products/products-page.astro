---
// Importing necessary components
import MainLayout from "~/presentation/src/shared/layouts/MainLayout.astro";
import PrimaryCTA from "~/presentation/src/shared/components/ui/buttons/PrimaryCTA.astro";
import CardSmall from "~/presentation/src/shared/components/ui/cards/CardSmall.astro";
import CardWide from "~/presentation/src/shared/components/ui/cards/CardWide.astro";
import FeaturesStatsAlt from "~/presentation/src/shared/components/sections/features/FeaturesStatsAlt.astro";
import TestimonialsSectionAlt from "~/presentation/src/shared/components/sections/testimonials/TestimonialsSectionAlt.astro";

// Importing necessary functions from Astro
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";
import { SITE } from "~/presentation/src/shared/constants/constants";

// Fetching all the product related content and sorting it by main.id
const product: CollectionEntry<"products">[] = (
  await getCollection("products", ({ id }) => {
    return id.startsWith("en/");
  })
).sort((a: CollectionEntry<"products">, b: CollectionEntry<"products">) => a.data.main.id - b.data.main.id);

// Define variables for page content
const title: string = "Lorem Ipsum Dolor Sit Amet";
const subTitle: string =
  "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.";

// Testimonial data that will be rendered in the component
const testimonials = [
  // First testimonial data
  {
    content:
      ' "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua." ',
    author: "John Doe",
    role: "Role | Company",
    avatarSrc: "https://via.placeholder.com/320",
    avatarAlt: "Image Description",
  },
  // Second testimonial data
  {
    content:
      ' "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua." ',
    author: "Jane Smith",
    role: "Role | Company",
    avatarSrc: "https://via.placeholder.com/320",
    avatarAlt: "Image Description",
  },
  // Third testimonial data
  {
    content:
      ' "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua." ',
    author: "Richard Roe",
    role: "Role | Company",
    avatarSrc: "https://via.placeholder.com/320",
    avatarAlt: "Image Description",
  },
];

const pageTitle: string = `Products | ${SITE.title}`;
---

<MainLayout
  title={pageTitle}
  structuredData={{
    "@context": "https://schema.org",
    "@type": "WebPage",
    "@id": "https://antkayaiklimlendirme.com/products",
    url: "https://antkayaiklimlendirme.com/products",
    name: "Hardware Tools | Antkaya İklimlendirme",
    description:
      "Explore the durability and precision of Antkaya İklimlendirme tools, designed for both professionals and enthusiasts.",
    isPartOf: {
      "@type": "WebSite",
      url: "https://antkayaiklimlendirme.com",
      name: "Antkaya İklimlendirme",
      description:
        "Antkaya İklimlendirme offers top-tier hardware tools and expert construction services to meet all your project needs.",
    },
    inLanguage: "en-US",
  }}
>
  <div class="mx-auto max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14 2xl:max-w-full">
    <div class="mb-4 flex items-center justify-between gap-8 sm:mb-8 md:mb-12">
      <div class="flex items-center gap-12">
        <h1
          class="text-balance text-2xl font-bold tracking-tight text-neutral-800 dark:text-neutral-200 md:text-4xl md:leading-tight"
        >
          {title}
        </h1>
        {
          subTitle && (
            <p class="hidden max-w-screen-sm text-pretty text-neutral-600 dark:text-neutral-400 md:block">{subTitle}</p>
          )
        }
      </div>
      <PrimaryCTA title="Customer Stories" url="#testimonials" noArrow={true} />
    </div>
    <!--Displaying products in alternating styles. Alternative product gets different card styling.-->
    <!--Maps through all product entries and displays them with either CardSmall or CardWide based on their position.-->
    <section class="grid grid-cols-1 gap-4 sm:grid-cols-3 md:gap-6 xl:gap-8">
      {
        product.map((product, index) => {
          const position = index % 4;
          if (position === 0 || position === 3) {
            return <CardSmall product={product} />;
          } else {
            return <CardWide product={product} />;
          }
        })
      }
    </section>
  </div>
  <!--Features statistics section-->
  <FeaturesStatsAlt
    title="Lorem Ipsum Dolor Sit Amet"
    subTitle="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
    benefits={[
      "Lorem ipsum dolor sit amet, consectetur adipiscing elit.",
      "Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
      "Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.",
    ]}
  />
  <!--Testimonials section-->
  <TestimonialsSectionAlt title="What Our Customers Say" testimonials={testimonials} />
</MainLayout>
