---
import TabNav from "~/presentation/src/shared/components/ui/blocks/TabNav.astro";
import TabContent from "~/presentation/src/shared/components/ui/blocks/TabContent.astro";
import Icon from "~/presentation/src/shared/components/ui/icons/Icon.astro";
import { Image } from "astro:assets";
import { mergeCls } from "~/core/acore-ts/ui/ClassHelpers";

const { title, tabs } = Astro.props;

type Tab = {
  heading: string;
  content: string;
  icon: string;
  imageSrc: any;
  imageAlt: string;
  first?: boolean;
  second?: boolean;
};

type Props = {
  title?: string;
  tabs: Tab[];
};

const activeTabClass = "bg-neutral-50 shadow-md hover:border-transparent dark:bg-neutral-700/60";
const activeTabHeadingClass = "text-orange-400 dark:text-orange-300";
const activeTabContentClass = "text-neutral-600 dark:text-neutral-200";
---

<section class="mx-auto max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14 2xl:max-w-full">
  <div class="relative p-6 md:p-16">
    <div class="relative z-10 lg:grid lg:grid-cols-12 lg:items-center lg:gap-20">
      <!-- Section's heading and tab navigation -->
      <div class="mb-10 lg:order-2 lg:col-span-5 lg:col-start-8 lg:mb-0">
        <h2 class="text-2xl font-bold text-neutral-800 dark:text-neutral-200 sm:text-3xl">
          <Fragment set:html={title} />
        </h2>

        <nav class="mt-5 grid gap-4 md:mt-10" aria-label="Tabs" role="tablist">
          <button
            type="button"
            class={mergeCls(
              "dark:hover:bg-neutral-700 rounded-xl p-4 text-start outline-none ring-zinc-500 transition duration-300 hover:bg-neutral-200 focus-visible:ring dark:ring-zinc-200 dark:focus:outline-none md:p-5",
              activeTabClass,
            )}
          >
            <span class="flex">
              <Icon name={tabs[0].icon} class="size-12 text-secondary" />
              <span class="ms-6 grow">
                <span
                  class={mergeCls(
                    "block text-lg font-bold text-neutral-800 dark:text-neutral-200",
                    activeTabHeadingClass,
                  )}>{tabs[0].heading}</span
                >
                <span class={mergeCls("mt-1 block text-neutral-500 dark:text-neutral-400", activeTabContentClass)}
                  >{tabs[0].content}</span
                >
              </span>
            </span>
          </button>

          <button
            type="button"
            class={mergeCls(
              "dark:hover:bg-neutral-700 rounded-xl p-4 text-start outline-none ring-zinc-500 transition duration-300 hover:bg-neutral-200 focus-visible:ring dark:ring-zinc-200 dark:focus:outline-none md:p-5",
            )}
          >
            <span class="flex">
              <Icon name={tabs[1].icon} class="size-12 text-secondary" />
              <span class="ms-6 grow">
                <span class={mergeCls("block text-lg font-bold text-neutral-800 dark:text-neutral-200")}
                  >{tabs[1].heading}</span
                >
                <span class={mergeCls("mt-1 block text-neutral-500 dark:text-neutral-400")}>{tabs[1].content}</span>
              </span>
            </span>
          </button>

          <button
            type="button"
            class={mergeCls(
              "dark:hover:bg-neutral-700 rounded-xl p-4 text-start outline-none ring-zinc-500 transition duration-300 hover:bg-neutral-200 focus-visible:ring dark:ring-zinc-200 dark:focus:outline-none md:p-5",
            )}
          >
            <span class="flex">
              <Icon name={tabs[2].icon} class="size-12 text-secondary" />
              <span class="ms-6 grow">
                <span class={mergeCls("block text-lg font-bold text-neutral-800 dark:text-neutral-200")}
                  >{tabs[1].heading}</span
                >
                <span class={mergeCls("mt-1 block text-neutral-500 dark:text-neutral-400")}>{tabs[1].content}</span>
              </span>
            </span>
          </button>
        </nav>
      </div>

      <div class="lg:col-span-7">
        <div class="relative">
          <div class="w-full overflow-hidden rounded-xl">
            <div id={`tabs-with-card-item-${0}`} role="tabpanel">
              <Image
                src={tabs[0].imageSrc}
                alt={tabs[0].imageAlt}
                class="aspect-[3/2] rounded-xl object-cover shadow-xl shadow-neutral-200 dark:shadow-neutral-900/[.2] lg:aspect-auto"
                draggable={"false"}
                format={"webp"}
                loading={"eager"}
              />
            </div>
            <div id={`tabs-with-card-item-${1}`} role="tabpanel">
              <Image
                src={tabs[1].imageSrc}
                alt={tabs[1].imageAlt}
                class="hidden aspect-[3/2] rounded-xl object-cover shadow-xl shadow-neutral-200 dark:shadow-neutral-900/[.2] lg:aspect-auto"
                draggable={"false"}
                format={"webp"}
                loading={"eager"}
              />
            </div>
            <div id={`tabs-with-card-item-${2}`} role="tabpanel">
              <Image
                src={tabs[2].imageSrc}
                alt={tabs[2].imageAlt}
                class="hidden aspect-[3/2] rounded-xl object-cover shadow-xl shadow-neutral-200 dark:shadow-neutral-900/[.2] lg:aspect-auto"
                draggable={"false"}
                format={"webp"}
                loading={"eager"}
              />
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="absolute inset-0 grid h-full w-full grid-cols-12">
      <!-- Decorative background and sizing -->
      <div
        class="col-span-full h-5/6 w-full rounded-xl bg-neutral-100 dark:bg-white/[.075] sm:h-3/4 lg:col-span-7 lg:col-start-6 lg:h-full"
      >
      </div>
    </div>
  </div>
</section>
